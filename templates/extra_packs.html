
<h2>{{ title }}</h2>

<form id="extra-packs-form" action="/lib-extra-packs" enctype="multipart/form-data" method="post">
    <input type="hidden" id="ZYNTHIAN_EXTRAPACKS_INSTALL" name="ZYNTHIAN_EXTRAPACKS_INSTALL" value="">

	<p>From this page you can install extra packages with presets and soundfonts not included in the official SD image.</p>

	<div id='install-button'>
		{% for pack_name, info in config['packs'].items() %}
		<h3>{{ info['title'] }}: ({{ info['size'] }})</h3>
		<p>{{ info['description'] }} {% if info['url'] %}[<a href="{{ info['url'] }}">source</a>]{% end %}</p>
		{% if not info['installed'] %}
		<input id="install_{{ pack_name }}" class="btn btn-lg btn-theme" type="button" value="Install {{ info['title'] }}" onclick="installPackage('{{ pack_name }}')">
		{% else %}
		<input id="install_{{ pack_name }}" class="btn btn-lg btn-success" type="button" value="Already Installed!" onclick="">
		{% end %}
		<br/>
		<br/>
		{% end %}
	</div>

	<div>
		{% if errors %}<div class="alert alert-danger">{% raw str(errors).replace("\n", "<br>") %}</div>{% end %}
	</div>
</form>

<div id="loading-div-background">
	<div id="loading-div" class="ui-corner-all">
		Installing package '<span id="pack_name"></span>'. Please wait...
	</div>
</div>

<script type="text/javascript">
$(document).ready(function (){
	$("#loading-div-background").hide();
});

function installPackage(pack_name) {
	showInstallingBusy(pack_name);
	$("#ZYNTHIAN_EXTRAPACKS_INSTALL").val(pack_name)
	$("#extra-packs-form").submit()
}

function showInstallingBusy(pack_name){
	$("#loading-div-background #pack_name").html(pack_name);
	$("#loading-div-background").show();
	show_busy()
}
</script>
